<?xml version="1.0" encoding="UTF-8"?>
<chapter>
  <title>Generic installation</title>

  <para>PMB is a web application that requires a web server configured with
  PHP together with access to a MySQL database. Installations may differ as
  regards protocol in relation to Operating Systems, but there are a number of
  similarities between them.</para>

  <sect1>
    <title>Pre-requisites</title>

    <para>See above, Chapter 3, section 3. Installation pre-requisites</para>
  </sect1>

  <sect1>
    <title>Installation</title>

    <para>Download the latest version on the PMB website
    [http://www.sigb.net].</para>

    <para>You may choose between the two archives formats, zip (for Windows)
    or tar.gz (for Linux). Both contain the same files. Extract the archive
    into the directory of your web server where you wish to install PMB (For
    the tar.gz archive, copy it into the install directory and enter tar xzf
    PMB.tar.gz.). For the remaining pages of this guide we will use as example
    an extraction into the sub-directory PMB in the root directory of your Web
    server on the workstation "myserver".</para>

    <sect2>
      <title>Creating the database and initializing the application</title>

      <para>From the place where you have extracted the archive, call the page
      <emphasis role="bold">tables/install.php</emphasis> (in our example,
      call the URL <emphasis
      role="bold">http://myserver/pmb/tables/install.php</emphasis>). This
      page will allow you to create the database on the MySQL server, fill it
      up with the required minimum to make PMB work, and create the
      administrator account in PMB. Two areas need to be filled in.</para>

      <para><emphasis role="bold"><emphasis>Next choose the language in which
      you wish to install PMB : this relates directly to the database
      interface language. The interface language may be changed at any time
      from the User's preferences.</emphasis></emphasis></para>

      <para><emphasis><emphasis role="bold">Caution : </emphasis><emphasis>IF
      YOU ARE NOT USING THIS PROCEDURE, THINK ABOUT DELETING THE FILES
      INSTALL.PHP and INSTALL.REP.PHP. FURTHERMORE : THINK ABOUT CHANGING THE
      ROOT PASSWORD ON MySQL. IT IS EMPTY BY DEFAULT, THIS CONSTITUTE A
      POTENTIAL SECURITY RISK.</emphasis></emphasis></para>

      <sect3>
        <title>System parameters</title>

        <para>These are the MySQL server parameters which will be used to
        create the database. It is imperative that the MySQL user has
        administrative rights on the server to be able to create the PMB
        database as well as the MySQL user for this database. The field Server
        allows to indicate the name of the machine hosting the MySQL server
        (it can of course be different from the one hosting the Web
        server).</para>
      </sect3>

      <sect3>
        <title>PMB parameters</title>

        <para>They are the parameters that the script will use to create the
        PMB database and the corresponding MySQL user :</para>

        <itemizedlist>
          <listitem>
            <para>PMB User/Password : MySQL user that will be created to
            access PMB database</para>
          </listitem>

          <listitem>
            <para>PMB database : the name given to the database to be
            created</para>
          </listitem>

          <listitem>
            <para>Filling up the tables with the set of examples : if you tick
            this check-box, the database will be loaded with a set of records
            and authorities files that will enable you to test the
            application</para>
          </listitem>
        </itemizedlist>

        <para>Once the parameters have been entered, click on the button
        <citetitle>Create database</citetitle>.</para>
      </sect3>
    </sect2>

    <sect2>
      <title>Database connection configuration files</title>

      <para>Once the database has been created, check the connection
      configuration files of PMB with the database. Edit the file
      <citetitle>db_param.inc.php</citetitle> in the sub-folder
      <citetitle>includes</citetitle> in the install directory.</para>

      <para>Verify the line :</para>

      <para><literal>define('LOCATION','nom_de_votre_base');</literal></para>

      <para>(nom_de_votre_base [name_of_your_database] is the name entered in
      the field PMB Database on the install page. If you have left the default
      parameters as they are : bibli).</para>

      <para>Check whether the parameters of the section name_of_your_database
      correspond to those of the connection :</para>

      <para><literal>nom_de_votre_base: // values for local
      access</literal></para>

      <para><literal> define('SQL_SERVER', 'chemin_du_serveur'); //server
      name</literal></para>

      <para><literal> define('USER_NAME', 'utilisateur_pmb'); //
      username</literal></para>

      <para><literal> define('USER_PASS', 'mot_de_passe');
      //password</literal></para>

      <para><literal> define('DATA_BASE', 'nom_de_votre_base');
      //name_of_database</literal></para>

      <para><literal> break;</literal></para>

      <para>Proceed with the same verification with the file
      <citetitle>opac_db_param.incp.php</citetitle> in
      <citetitle>opac_css/includes</citetitle>.</para>
    </sect2>

    <sect2>
      <title>First login</title>

      <para>Once you have completed all of the foregoing procedures, you may
      test the connection to PMB. Enter the address of your installation in
      your browser http://myserver/pmb</para>

      <para>On the connection page, login as :</para>

      <para><emphasis role="bold">Username</emphasis> : admin</para>

      <para><emphasis role="bold">Password</emphasis> : admin</para>

      <para>If all went well, you should have on screen the first page of PMB,
      with 5 tabs on the top section with Circulation already active. In the
      centre of the page there should be a text box to enter a borrower's
      barcode or name.</para>

      <para><emphasis>Note</emphasis> : When the database is created, only one
      user having full administrative privileges is created along with it.
      This user's name is Super User, his login admin, his password
      admin.</para>

      <para><emphasis role="bold">Caution : </emphasis>THINK ABOUT CHANGING
      THE PASSWORD OF THE USER ADMIN OF PMB, SET BY DEFAULT AS "ADMIN". THIS
      DEFAULT VALUE IS KNOWN TO ALL PMB USERS.</para>
    </sect2>

    <sect2>
      <title>Settings creation and version update</title>

      <para>Afin de conserver la base à jour, après chaque installation ou
      mise à jour :</para>

      <para>* Click on the 'Administration' tab</para>

      <para>* Go to the menu on the left hand side on the Administration page,
      click on Tools, then on Database update from among the links displayed
      at the top section</para>

      <para>* Click on the link 'click here to start update'</para>

      <para>* Click on continue until a message 'Your database is up-to-date
      in version v. xxx !' appears on screen</para>
    </sect2>
  </sect1>

  <sect1>
    <title>Changing the administrator's password</title>

    <para>We will not look at the administration of privileges and the various
    parameter settings possibilities of PMB in this tutorial. For this consult
    the Administrator's Guide.</para>

    <para>In order to tighten access to PMB, the next thing to do after
    installation is to change the password of user admin.</para>

    <para>This user is vested with full privileges in PMB and for this he
    bears the name of "Super User" by default. This user cannot be
    removed.</para>

    <para>To change the password :</para>

    <orderedlist>
      <listitem>
        <para>Click on the 'Administration' tab</para>
      </listitem>

      <listitem>
        <para>Go to the menu on the left hand side on the Administration page,
        click on the link 'users'</para>
      </listitem>

      <listitem>
        <para>When the manage users page appears, click on the link [password]
        of the user Super User</para>
      </listitem>

      <listitem>
        <para>Enter the new password you wish to use twice in the text boxes
        new password and confirmation</para>
      </listitem>

      <listitem>
        <para>Finally click on the button <citetitle>Save</citetitle></para>
      </listitem>
    </orderedlist>

    <para>You can also change the login 'admin' and the name 'Super User' by
    clicking on the link admin of the Super User on the manage users
    page.</para>
  </sect1>

  <sect1>
    <title>Tested configurations</title>

    <para>PMB was successfully tested on the following platforms :</para>

    <para>* Windows XP with EasyPHP 1.6 and 1.7</para>

    <para>* Windows 98 with EasyPHP 1.6 and 1.7</para>

    <para>* Windows 2000 server with IIS/MySQL 3.23</para>

    <para>* Linux Mandrake 8.2 with Apache 1.3.23/ MySQL 3.23</para>

    <para>* MacOS X with Apache/MySQL</para>
  </sect1>
</chapter>